\ProvidesPackage{beamerthemeacib}

\RequirePackage{tikz}
\RequirePackage{setspace}
\RequirePackage{fontspec}
\RequirePackage{graphicx}
\RequirePackage[british]{babel}
\RequirePackage[useregional]{datetime2}
\RequirePackage{changepage}
\usetikzlibrary{positioning}
\usetikzlibrary{calc}

% \definecolor{acibgreen}{rgb}{26,229,26}
% \definecolor{bokugreen}{rgb}{79,183,71}
% \definecolor{biotopblue}{rgb}{0,0,255}
% \definecolor{biotopred}{rgb}{255,0,0}
% \definecolor{biotechteal}{rgb}{74,177,213}
% \definecolor{black}{rgb}{0,0,0}

% \useoutertheme{shadow}
% \useoutertheme{split}


\setsansfont[%
    ItalicFont={Fira Sans Italic},%
    BoldFont={Fira Sans SemiBold},%
    BoldItalicFont={Fira Sans Italic}%
]{Fira Sans Regular}


\makeatletter
% \newcommand{\event}[1]{#1}
\def\event#1{\gdef\@event{#1}}
\newcommand{\insertevent}{\@event}
\makeatother


\setbeamerfont{title}{series=\bfseries}
\setbeamerfont{title}{size=\Large}
\setbeamerfont{frametitle}{size=\Large}
\setbeamerfont{frametitle}{series=\bfseries}
\setbeamerfont{framesubtitle}{size=\small}
\setbeamerfont{author}{size=\normalsize}
\setbeamerfont{date}{size=\scriptsize}
\setbeamerfont{institute}{size=\small}
\setbeamerfont{block title}{series=\bfseries}
\setbeamerfont{alerted text}{series=\bfseries}


\setbeamertemplate{title page}{%
    \vspace*{1.2cm}%
    {%
        \usebeamerfont{date}%
        \insertevent, \insertdate%
    }%
    \vspace{1.2cm}%


    \begin{center}
        {%
            \usebeamerfont{author}
            \insertauthor
        }
        \par\vspace{12pt}

        {%
            \usebeamerfont{title}
            \inserttitle
        }
        \par\vspace{16pt}
        {%
            \usebeamerfont{institute}
            \insertinstitute
        }
        \par\medskip
    \end{center}


    \begin{tikzpicture}[remember picture,overlay]
        \node[anchor=north east] (aciblogo) [xshift=-105pt,yshift=-10pt]
            at (current page.north east)
        { \includegraphics[height=1.2cm]{logos/logo_acib_500.png} };
        \node (bokulogo) [base right=2pt of aciblogo]
        { \includegraphics[height=1.0cm]{logos/imics.jpg} };
    \end{tikzpicture}

    {
        \usebeamercolor{acibcolor}
        \begin{tikzpicture}[remember picture,overlay]
            \coordinate (origin) at ($ (current page.south west) + (0, .6) $);
            \fill[ fill=fg ]
                (origin) --
                ++(.5\paperwidth,0) --
                ++(.1, -.2) --
                ++(-.1, -.2) --
                ++(-.5\paperwidth,0);
            \node[anchor=east,color=white,font=\tiny]
                at ($ (origin) + (.5\paperwidth, -0.2) $)
                {INNOVATIONS FROM NATURE};
            \node[anchor=west,color=fg,font=\tiny]
                at ($ (origin) + (.51\paperwidth, -0.2) $)
                {AUSTRIAN CENTRE OF INDUSTRIAL BIOTECHNOLOGY};
        \end{tikzpicture}
    }
}


\setbeamertemplate{background}{}

\setbeamertemplate{frametitle}{%
    \begin{adjustwidth}{-1em}{0em}
        {%
            \usebeamerfont{framesubtitle}%
            \secname\vskip1pt
        }%
        % \ifx\insertframesubtitle\@empty\else%
        %     {%
        %         \usebeamerfont{framesubtitle}%
        %         \insertframesubtitle\vskip4pt
        %     }%
        % \fi%
        {%
            \usebeamerfont{frametitle}\insertframetitle\vskip3pt
        }%
    \end{adjustwidth}
    % \begin{tikzpicture}[remember picture, overlay]
    %     \node[anchor = north east, xshift = -10pt, yshift = -5pt]
    %     at (current page.north east)
    %     {\usebeamerfont{framesubtitle}\itshape \secname};
    % \end{tikzpicture}
}

\setbeamertemplate{footline}{%

    \begin{beamercolorbox}[ht=20pt, wd = \paperwidth]{white}
    \end{beamercolorbox}

    {
        \usebeamercolor{acibcolor}
        \begin{tikzpicture}[remember picture,overlay]
            \newcommand{\dist}{.15}
            \newcommand{\len}{.75\paperwidth}
            \coordinate (origin) at ($ (current page.south west) + (0, .6) $);
            \fill[ fill=fg ]
                (origin) --
                ++(\len,0) --
                ++(.1, -\dist) --
                ++(-.1, -\dist) --
                ++(-\len,0);
            \node[anchor=east,color=white,font=\tiny]
                at ($ (origin) + (\len, -\dist) $)
                {INNOVATIONS FROM NATURE};
            \node[anchor=east, font=\scriptsize, color = black]
                at ($ (origin) + (2, -\dist) $)
                {\insertframenumber};
            % \node[anchor=west,color=green,font=\tiny]
            %     at ($ (origin) + (.51\paperwidth, -\dist) $)
            %     {AUSTRIAN CENTRE OF INDUSTRIAL BIOTECHNOLOGY};
            \node[anchor=south east] (bokulogo)
                at ($ (current page.south east) + (-.35, .25) $)
                { \includegraphics[height=0.6cm]{logos/imics.jpg} };
            \node (aciblogo) [base left=2pt of bokulogo]
                { \includegraphics[height=0.8cm]{logos/logo_acib_500.png} };
            % \node[anchor=north east] (section)
            %     at ($(current page.north east) + (-2pt, -1pt)$)
            %     {\itshape \insertsection\ --- \insertsubsection };
        \end{tikzpicture}
    }
    % \begin{tikzpicture}[remember picture,overlay]
    %     \node[anchor=south west] (aciblogo) [xshift=5pt,yshift=3pt] at (current page.south west)
    %     { \includegraphics[height=.6cm]{logos/logo_acib_500.png} };
    %     \node (bokulogo) [base right=2pt of aciblogo]
    %     { \includegraphics[height=.4cm]{logos/BOKU-Logo-Department-DBT-E.pdf} };
    %     \node (biotoplogo) [base right=2pt of bokulogo]
    %     { \includegraphics[height=.4cm]{logos/biotop.png} };
    %
    %     \draw [ultra thin] (current page.south east)++(0,.7cm) -- +(-.73\paperwidth,0);
    % \end{tikzpicture}
    %
    % \begin{beamercolorbox}[sep=0.3cm,ht=.7cm,wd=\paperwidth]{white}
    %     \hspace{.3\paperwidth}
    %     \begin{minipage}{.53\paperwidth}
    %     \insertauthor \quad --- \quad \insertevent
    %     \end{minipage}
    %     \begin{minipage}{.1\paperwidth}
    %         \flushright
    %         \insertframenumber
    %     \end{minipage}
    % \end{beamercolorbox}
}

\setbeamertemplate{itemize item}[square]
\setbeamertemplate{itemize subitem}[circle]
\setbeamertemplate{section in toc}[square]
\setbeamertemplate{navigation symbols}{}
