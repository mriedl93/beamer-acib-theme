\ProvidesPackage{beamerthemeacib}

\RequirePackage{tikz}
\RequirePackage{setspace}
\RequirePackage{graphicx}
\RequirePackage[british]{babel}
\RequirePackage[useregional]{datetime2}
\RequirePackage{changepage}
\usetikzlibrary{positioning}
\usetikzlibrary{calc}

\definecolor{acibgreen}{rgb}{26,229,26}
\definecolor{bokugreen}{rgb}{79,183,71}
\definecolor{biotopblue}{rgb}{0,0,255}
\definecolor{biotopred}{rgb}{255,0,0}
\definecolor{biotechteal}{rgb}{74,177,213}
\definecolor{black}{rgb}{0,0,0}

% \useoutertheme{shadow}
% \useoutertheme{split}


\makeatletter
% \newcommand{\event}[1]{#1}
\def\event#1{\gdef\@event{#1}}
\newcommand{\insertevent}{\@event}
\makeatother


\setbeamerfont{title}{series=\bfseries}
\setbeamerfont{title}{size=\Large}
\setbeamerfont{frametitle}{size=\Large}
\setbeamerfont{framesubtitle}{size=\small}
\setbeamerfont{author}{size=\normalsize}
\setbeamerfont{date}{size=\scriptsize}
\setbeamerfont{institute}{size=\small}


\setbeamertemplate{title page}{%
    {%
        \usebeamerfont{date}
        \insertevent, \insertdate
    }
    \par\vspace{40pt}


    \begin{center}
        {%
            \usebeamerfont{author}
            \insertauthor
        }
        \par\vspace{12pt}

        {%
            \usebeamerfont{title}
            \inserttitle
        }
        \par\medskip
    \end{center}


    \begin{tikzpicture}[remember picture,overlay]
        \node[anchor=north east] (aciblogo) [xshift=-80pt,yshift=-10pt]
            at (current page.north east)
        { \includegraphics[height=1.2cm]{logos/logo_acib_500.png} };
        \node (bokulogo) [base right=2pt of aciblogo]
        { \includegraphics[height=1.0cm]{logos/BOKU-Logo-Department-DBT-E.pdf} };
    \end{tikzpicture}

    {
        \usebeamercolor{acibcolor}
        \begin{tikzpicture}[remember picture,overlay]
            \coordinate (origin) at ($ (current page.south west) + (0, .6) $);
            \fill[ fill=fg ]
                (origin) --
                ++(.5\paperwidth,0) --
                ++(.1, -.2) --
                ++(-.1, -.2) --
                ++(-.5\paperwidth,0);
            \node[anchor=east,color=white,font=\tiny]
                at ($ (origin) + (.5\paperwidth, -0.2) $)
                {INNOVATIONS FROM NATURE};
            \node[anchor=west,color=fg,font=\tiny]
                at ($ (origin) + (.51\paperwidth, -0.2) $)
                {AUSTRIAN CENTRE OF INDUSTRIAL BIOTECHNOLOGY};
        \end{tikzpicture}
    }
}


\setbeamertemplate{background}{}

\setbeamertemplate{frametitle}{%
    \begin{adjustwidth}{-1em}{0em}
        {%
            \usebeamerfont{frametitle}\insertframetitle\vskip3pt
        }%
        \ifx\insertframesubtitle\@empty\else%
            {%
                \usebeamerfont{framesubtitle}%
                \insertframesubtitle\vskip4pt
            }%
        \fi%
    \end{adjustwidth}
}

\setbeamertemplate{footline}{%

    \begin{beamercolorbox}[ht=20pt, wd = \paperwidth]{white}
    \end{beamercolorbox}

    {
        \usebeamercolor{acibcolor}
        \begin{tikzpicture}[remember picture,overlay]
            \newcommand{\dist}{.15}
            \newcommand{\len}{.77\paperwidth}
            \coordinate (origin) at ($ (current page.south west) + (0, .6) $);
            \fill[ fill=fg ]
                (origin) --
                ++(\len,0) --
                ++(.1, -\dist) --
                ++(-.1, -\dist) --
                ++(-\len,0);
            \node[anchor=east,color=white,font=\tiny]
                at ($ (origin) + (\len, -\dist) $)
                {INNOVATIONS FROM NATURE};
            \node[anchor=east, font=\scriptsize, color = white]
                at ($ (origin) + (2, -\dist) $)
                {\insertframenumber};
            % \node[anchor=west,color=green,font=\tiny]
            %     at ($ (origin) + (.51\paperwidth, -\dist) $)
            %     {AUSTRIAN CENTRE OF INDUSTRIAL BIOTECHNOLOGY};
            \node[anchor=south east] (bokulogo)
                at ($ (current page.south east) + (-.35, .25) $)
                { \includegraphics[height=0.6cm]{logos/BOKU-Logo-Department-DBT-E.pdf} };
            \node (aciblogo) [base left=2pt of bokulogo]
                { \includegraphics[height=0.8cm]{logos/logo_acib_500.png} };
        \end{tikzpicture}
    }
    % \begin{tikzpicture}[remember picture,overlay]
    %     \node[anchor=south west] (aciblogo) [xshift=5pt,yshift=3pt] at (current page.south west)
    %     { \includegraphics[height=.6cm]{logos/logo_acib_500.png} };
    %     \node (bokulogo) [base right=2pt of aciblogo]
    %     { \includegraphics[height=.4cm]{logos/BOKU-Logo-Department-DBT-E.pdf} };
    %     \node (biotoplogo) [base right=2pt of bokulogo]
    %     { \includegraphics[height=.4cm]{logos/biotop.png} };
    %
    %     \draw [ultra thin] (current page.south east)++(0,.7cm) -- +(-.73\paperwidth,0);
    % \end{tikzpicture}
    %
    % \begin{beamercolorbox}[sep=0.3cm,ht=.7cm,wd=\paperwidth]{white}
    %     \hspace{.3\paperwidth}
    %     \begin{minipage}{.53\paperwidth}
    %     \insertauthor \quad --- \quad \insertevent
    %     \end{minipage}
    %     \begin{minipage}{.1\paperwidth}
    %         \flushright
    %         \insertframenumber
    %     \end{minipage}
    % \end{beamercolorbox}
}

\setbeamertemplate{itemize items}[circle]

\setbeamertemplate{navigation symbols}{}
